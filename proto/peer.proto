syntax = "proto3";
package proto;

import "common.proto";
import "eraftpb.proto";

// process message from client
service Endorser {
    rpc ProcessProposal(Proposal) returns (ProposalResponse) {}
}


service Network {
    rpc Connect (stream Envelope) returns (stream Envelope) {}
}

/*
|\_ Envelope
    \_ NetworkMessage
        \_ TypeMessage
        \_ eraftpb.ConfChange
        \_ eraftpb.Message

*/

message TypeMessage {
    int32 type = 1;
    bytes data = 2;
}

message NetMessage {
    oneof Type {
        TypeMessage tmsg = 1;
        eraftpb.ConfChange cc = 2;
        eraftpb.Message msg = 3;
    }
}
